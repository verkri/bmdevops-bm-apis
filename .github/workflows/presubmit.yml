name: Presubmit
on: 
  pull_request:
    branches:
      - master
jobs: 
  openapi-check:
    runs-on: ubuntu-latest
    steps:
      - name: Check out head branch
        uses: actions/checkout@v4
        with:
          path: head
      - name: Check out master branch
        uses: actions/checkout@v4
        with:
          ref: master
          path: trunk
      - name: Run OpenAPI Insights
        uses: ./.github/actions/openapi-change-insights
        with:
          trunk_specs: 'trunk/*.yml'
          head_specs: 'head/*.yml'